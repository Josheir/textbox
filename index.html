<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="box.css">

    
</head>
<body>

    
    

    <div id = "div2" >2</div>
<div  id = "box" >
    
    <p>fadjlslfd;asla;dfl;</p>
    

    <div  class = "relative" ></div>

</div>





<script>

//div2 container


let div1 = document.createElement("div");
    div1.style = "background-color: red";
    div1.className = "divClass1";
    div1.style.width = "5rem";
    div1.style.height = "5rem";
    div1.style.position = "absolute";
    
    div1.style.fontSize = "2rem";
    div1.style.text = "decoration underline";
    //div1.style = "border-style:solid;";
    //div1.style.width = ".55rem";//
    //div1.style.top = "9rem";
    
    //div1.style = "border-bottom: 1px solid;";

    let span1 = document.createElement("span");
    span1.style.textDecoration = "underline";


    let cursorContainer = document.createElement("div");

    span1.appendChild(div1)
    cursorContainer.appendChild(div1);
    div2.appendChild(cursorContainer);
    


    
    var gPositionX = 0;
    var letters = [];
    class textbox{

        constructor(){

            let box = document.createElement("div");
            box.className = "box-Class";     
            }

        
}
    

    let gCounter = 1;
    let lettersWithoutCommas = "";

    document.addEventListener('keydown' , function(e){
    //document.write(event.code);

    gPositionX++;
    
    
    


    gCounter++;
    
    let keynum;
    if(window.e) {
        keynum = e.keyCode;
    }
    else if(e.which){
        keynum = e.which;

    }
    keynum = e.which;

    

    
    nextLetter = (String.fromCharCode(keynum));
   

    if(nextLetter == '0')
    {
       // alert(nextLetter);
        advanceArrayOneTime();
        insertCharacter(gCounter-1 , nextLetter);

    }

    if (nextLetter == ".")
    {
        
        deleteCharacter();
        return(-1);
    }

 
    let a = 'a';
    let uscore = '\u0332';
    
    //let s = uscore + a;

    //alert(uscore);

    letters.push(nextLetter);
    

    
    lettersWithoutCommas = letters.join("");
    
    if (gCounter %35 == 1) getelee
    {
        
        letters.push('<br>');
        lettersWithoutCommas = letters.join("");
        
        
    }

    
    string3 = "<span><u>" + lettersWithoutCommas +  "</u></span>";

        
    //alert(lettersWithoutCommas);
    //let str = toString(letters);
    //document.getElementById('box').innerHTML = "<u>{a}</U>";
        //let id = "box";
        //innertext 
        //;
        //s.value = "qwert"; 
        document.getElementById('box').innerText = 'awq';

        //document.getElementById('box').innerHTML = string3;

    //document.getElementById('box').innerHTML = 'A';


    
    });


    function deleteCharacter(){
        
            

            let lettersPoppedFrom = letters.pop(); 
            if (lettersPoppedFrom == '<br>')
            {
                let lettersPoppedFrom = letters.pop();
                //gCounter--; 
                //gCounter--;   
            }

            gCounter--;
            gCounter--;
            
            lettersWithoutCommas = letters.join("");
            document.getElementById('box').innerHTML = lettersWithoutCommas;
    }



    function test(){
    document.getElementById('box').innerHTML = 'test';
    }

    


function insertCharacter(indexToInsertAt ,valueOfInsert){

    //insert character into array
    //move all breaks back one with swap
    advanceArrayOneTime(indexToInsertAt);

    length = gCounter + 1;

    
        

    letters.splice(1, 0, valueOfInsert );
    lettersWithoutCommas = letters.join("");

    for(i = 0 ; i < length ; i++)
    {
        if (lettersWithoutCommas == '<br>'){
        // swap <br> with value right before
        swapBreak(length)
        }

    }
}

function swapBreak(breakPosition){
    let holder;
    lettersWithoutCommas[oneBeforeBreak] = lettersWithoutCommas[breakPosition-1]
    
    holder = lettersWithoutCommas[oneBeforeBreak];
    lettersWithoutCommas[oneBeforeBreak]= lettersWithoutCommas[breakPosition];
    lettersWithoutCommas[breakPosition] = holder;

}

function advanceArrayOneTime(){

    for(i = 0; i < gCounter-3 ; i++)
    {
        if(i == gCounter)
        {
            //break;
        }
        
    }
    
    letters[i] = '';
    console.log(letters, i, gCounter);
    
    
}

    
function backSpace(){
    gCounter = 0;
    gPostionX--;
    gPositionY = 0;
    
}
    
    


</script>




</body>

</html>