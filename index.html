<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="box.css">
    
    


    
</head>
<body>

    
    
    
    
    <div id = "demo"></div>
<div  id = "box" >
    
    
    <div id = "relative" ></div>
    <div id = "cursor" ></div>

    
    

</div>





<script>



//div2 container

/*
let div1 = document.createElement("div");
    div1.style = "background-color: red";
    div1.className = "divClass1";
    div1.style.width = "5rem";
    div1.style.height = "5rem";
    div1.style.position = "absolute";
    
    div1.style.fontSize = "2rem";
    div1.style.text = "decoration underline";
  */  


  
    


    
    var gPositionX = 0;
    var letters = [];
    var gWidth = 1;
    class textbox{

        constructor(){

            //let box = document.createElement("div");
            //box.className = "box-Class";     
            }

        
}
    

    let gCounter = 1;
    let lettersWithoutCommas = "";
    let cursorLocation = 2.5; 
    let gWidthFlag = 1;
    let gNum = 0;
    document.addEventListener('keydown' , function(e){
        cursor.style.display='block';


    gPositionX++;
    
    
    
let key = e.key;


    gCounter++;
    
    
    

    
    nextLetter = (e.key);
   
    //  get character alert(nextLetter);
    if (nextLetter === 'Shift')
    {
        //alert("here");
        return(-1);
    }

    if(nextLetter == '0')
    {
       // alert(nextLetter);
        advanceArrayOneTime();
        insertCharacter(gCounter-1 , nextLetter);

    }

    if (nextLetter == ".")
    {
        
        deleteCharacter();
        return(-1);
    }


    // move ahead
 
    

    letters.push(nextLetter);
    

    
    lettersWithoutCommas = letters.join("");
    


    
    if (gCounter %32 == 1)
    {
        
        letters.push('<br>');
        lettersWithoutCommas = letters.join("");
        
        
    }
    

    
   
        if(gWidthFlag == 1)
        {
            gNum = gNum + 0;

            gWidth = gNum.toString();
            gWidthFlag++;
            //alert("1");
        }

        else if(gWidthFlag == 2)
        {
            gNum = gNum + 7;

            gWidth = gNum.toString();
            gWidthFlag++;
            //alert("2");
        }

        else{
            gNum = gNum + 7.05;

            gWidth = gNum.toString();
           
            
        }   
          

        
        //document.getElementById('box').innerText = lettersWithoutCommas;
        document.getElementById('relative').innerText = lettersWithoutCommas;
        relativeElement = document.getElementById('cursor');
        relativeElement.setAttribute("style", 'left:' + gWidth + 'px');
        
    
    });


    function deleteCharacter(){
        
            

            let lettersPoppedFrom = letters.pop(); 
            if (lettersPoppedFrom == '<br>')
            {
                let lettersPoppedFrom = letters.pop();
                //gCounter--; 
                //gCounter--;   
            }

            gCounter--;
            gCounter--;
            
            lettersWithoutCommas = letters.join("");
            document.getElementById('box').innerHTML = lettersWithoutCommas;
    }



    function test(){
    document.getElementById('box').innerHTML = 'test';
    }

    


function insertCharacter(indexToInsertAt ,valueOfInsert){

    //insert character into array
    //move all breaks back one with swap
    advanceArrayOneTime(indexToInsertAt);

    length = gCounter + 1;

    
        

    letters.splice(1, 0, valueOfInsert );
    lettersWithoutCommas = letters.join("");

    for(i = 0 ; i < length ; i++)
    {
        if (lettersWithoutCommas == '<br>'){
        // swap <br> with value right before
        swapBreak(length)
        }

    }
}

function swapBreak(breakPosition){
    let holder;
    lettersWithoutCommas[oneBeforeBreak] = lettersWithoutCommas[breakPosition-1]
    
    holder = lettersWithoutCommas[oneBeforeBreak];
    lettersWithoutCommas[oneBeforeBreak]= lettersWithoutCommas[breakPosition];
    lettersWithoutCommas[breakPosition] = holder;

}

function advanceArrayOneTime(){

    for(i = 0; i < gCounter-3 ; i++)
    {
        if(i == gCounter)
        {
            //break;
        }
        
    }
    
    letters[i] = '';
    console.log(letters, i, gCounter);
    
    
}

    
function backSpace(){
    gCounter = 0;
    gPostionX--;
    gPositionY = 0;
    
}
    
    


</script>




</body>

</html>